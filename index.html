<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;400&family=Montserrat:wght@300&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/style.css">
    <title>Encriptador de texto</title>
</head>

<body>
    <main>
        <h1><img src="Imagenes/Logo.png" alt="Logo de Alura" class="logo"></h1>
        <textarea cols="150" rows="10" placeholder="Ingresa texto aquí" id="texto-encriptar" class="campo-texto"
            required></textarea>

        <section class="botones-advertencia">
            <div class="advertencia">
                <img src="Imagenes/Vector.png" alt="Advertencia">
                <p>Solo letras minúsculas y sin acentos</p>
            </div>

            <div>
                <input type="submit" value="Encriptar" class="button-encriptar">
                <input type="submit" value="Desencriptar" class="button-desencriptar">
            </div>
        </section>
    </main>

    <aside class="rectangulo">
        <section class="rectangulo-vacio">
            <img src="Imagenes/Muñeco.png" alt="No ha encriptado ningún texto" class="imagen">
            <h2>Ningún mensaje fue encontrado</h2>
            <p>Ingresa el texto que desees encriptar o desencriptar</p>
        </section>

        <section class="rectangulo-texto">
            <textarea cols="10" rows="10" id="texto-encriptado" class="campo-texto"></textarea>
            <input type="submit" value="Copiar" class="Copiar">
        </section>
    </aside>

    <footer>
        <p class="copyright"> &copy Copyright Casapaico Rivera, Angelo Paolo - 2022</p>
    </footer>

    <script>
        var botonEncriptar = document.querySelector(".button-encriptar"), botonDesencriptar = document.querySelector(".button-desencriptar"),
            botonCopiar = document.querySelector(".Copiar"), textoEncriptar = document.querySelector("#texto-encriptar"),
            textoEncriptado = document.querySelector("#texto-encriptado"), desencrip, validacion = false,
            validar = document.querySelector("#texto-encriptar").onkeypress = validarDatos;

        function inicio() {
            document.querySelector(".rectangulo-vacio").style.display = "block";
            document.querySelector(".rectangulo-texto").style.display = "none";
        }

        function validarDatos() {
            var evento = window.event;
            if ((evento.charCode >= "A".charCodeAt() && evento.charCode <= "Z".charCodeAt())
                || (evento.charCode >= "a".charCodeAt() && evento.charCode <= "z".charCodeAt())) {
                return validacion = true;
            }
            else {
                document.querySelector("#texto-encriptar").style.color = "red";
                alert("¡Error!, por favor lee la advertencia")
                return validacion = false;
            }
        }

        function encriptar() {
            var texto = textoEncriptar.value, encriptar = "", encriptado = "", caracteres = [], encrip = "";
            if (validacion) {
                for (var x of texto) {
                    encriptar += x;
                    encriptado = encriptar.toLowerCase()
                    caracteres = encriptado.split("");
                }

                for (var i = 0; i <= caracteres.length; i++) {
                    if (caracteres[i] == "a") {
                        caracteres[i] = "ai";
                    } else if (caracteres[i] == "e") {
                        caracteres[i] = "enter";
                    } else if (caracteres[i] == "i") {
                        caracteres[i] = "imes";
                    } else if (caracteres[i] == "o") {
                        caracteres[i] = "ober";
                    } else if (caracteres[i] == "u") {
                        caracteres[i] = "ufat";
                    }
                    encrip = caracteres.join("");
                }
                document.querySelector(".rectangulo-vacio").style.display = "none";
                document.querySelector(".rectangulo-texto").style.display = "block";
                textoEncriptado.value = encrip;
                textoEncriptar.value = "";
            }
        }

        function Desencriptar() {
            var nuevoTexto = textoEncriptar.value, textoDesencriptar, t;
            if (validacion) {
                for (var x of nuevoTexto) {
                    if (x.indexOf("ai")) {
                        t += x.replace("ai", "a");
                    }
                }

                /*for (var i = 0; i <= desencrip.length; i++) {
                    if (desencrip[i] == "ai") {
                        desencrip[i] = "a";
                    } else if (desencrip[i] == "enter") {
                        desencrip[i] = "e";
                    } else if (desencrip[i] == "imes") {
                        desencrip[i] = "i";
                    } else if (desencrip[i] == "ober") {
                        desencrip[i] = "o";
                    } else if (desencrip[i] == "ufat") {
                        desencrip[i] = "u";
                    }
                    textoDesencriptar = desencrip.join("");
                }*/
                console.log(t);
                document.querySelector(".rectangulo-vacio").style.display = "none";
                document.querySelector(".rectangulo-texto").style.display = "block";
                textoEncriptado.value = textoDesencriptar;
                textoEncriptar.value = "";
            }
        }

        function copiar() {
            var copiar = textoEncriptado;
            copiar.select();
            document.execCommand("copy");
            textoEncriptado.value = "";
        }

        inicio();
        botonEncriptar.onclick = encriptar;
        botonCopiar.onclick = copiar;
        botonDesencriptar.onclick = Desencriptar;
    </script>
</body>

</html>